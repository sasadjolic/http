(function(l){l("HTTP",[],function(){"undefined"===typeof window&&(window={});var l=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}return!1},c=function(b,a){for(prop in a)"object"==typeof a[prop]?c(b[prop],a[prop]):b[prop]=a[prop]},o=function(b){var a=0;if("boolean"===typeof b)a=4;else if("string"===typeof b)a=2*b.length;else if("number"===typeof b)a=8;else if("object"===
typeof b)for(i in b)a+=8,a+=o(b[i]);return a},j=0,m=[],q=function(b,a){var d=b+" "+a,e=m[d];e&&e.response.expires&&0>=e.response.expires.getTime()-(new Date).getTime()&&(j-=e.size,m.splice(m.indexOf(d),1),e=null);return e},r=function(b){var a=b.getResponseHeader("cache-control");if(a){if(-1<a.indexOf("no-cache"))return"";if((a=a.match(/max-?age\s*=\s*(\d+)/))&&0<a[1])return b=a[1],a=new Date,a.setTime(a.getTime()+1E3*b),a}if(a=b.getResponseHeader("expires"))return new Date(a);a=new Date;a.setTime(a.getTime()+
d._options.cache.age);return a},h=null,d=function(){if(null!==h)throw Error("Can't instantiate more than one HTTP instance");};d.prototype={request:function(b,a,c,e,h){var n=q(b,a,c,e);if(n)h(null,n.response.status,n.response.headers,n.response.body);else{var f=l();f.open(b,a,!0);for(var p in c)f.setRequestHeader(p,c[p]);f.onreadystatechange=function(){if(4==f.readyState){clearTimeout(s);var g={};g.status=f.status;g.body=f.responseText;g.headers=(f.getAllResponseHeaders()||"").trim().split("\n");
g.expires=r(f);if(0<g.status){var k={request:{method:b,url:a,headers:c,body:e},response:g};k.size=o(k);j+k.size<=d._options.cache.size&&(m[b+" "+a]=k,j+=k.size);h(null,g.status,g.headers,g.body)}else h(Error("XMLHTTPRequest error"))}};var s=setTimeout(function(){f.abort()},d._options.timeout);f.send(e)}},options:function(b){c(d._options,b);return d._options}};d._options={cache:{enabled:!1,methods:["GET"],age:864E5,size:104857600},log:!1,timeout:6E4};null===h&&(h=new d);return h})})("function"===typeof define&&
define.amd?define:function(l,t,c){"undefined"!==typeof module&&module.exports?module.exports=c(require):window.HTTP="function"===typeof require?c(function(c){return window[c]}):c()});
